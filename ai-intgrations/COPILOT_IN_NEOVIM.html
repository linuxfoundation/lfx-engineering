<!DOCTYPE html>
<!--
Copyright The Linux Foundation and each contributor to CommunityBridge.
SPDX-License-Identifier: MIT
-->
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Adding GitHub Copilot Support in Neovim</title>
</head>
<body>
  <h1>Adding GitHub Copilot Support in Neovim</h1>

  <h2>1. Install Neovim</h2>
  <p>Go to the <a href="https://github.com/neovim/neovim/releases" target="_blank">Neovim GitHub releases</a> page, choose the latest version, and install it. Replace <code>&lt;latest-version&gt;</code> in the command below with the version number of the latest release:</p>
  <pre><code>wget https://github.com/neovim/neovim/releases/download/<latest_version>/nvim-linux-x86_64.appimage \
&& chmod +x nvim-linux-x86_64.appimage \
&& sudo cp -iv ./nvim-linux-x86_64.appimage /usr/bin/nvim</code></pre>
  <p>Verify installation:</p>
  <pre><code>nvim</code></pre>

  <h2>2. Install GitHub CLI</h2>
  <p>Assuming <code>git</code> is already installed, install GitHub CLI tools:</p>
  <pre><code>type -p curl &gt;/dev/null || sudo apt install curl -y
curl -fsSL https://cli.github.com/packages/githubcli-archive-keyring.gpg \
| sudo dd of=/usr/share/keyrings/githubcli-archive-keyring.gpg
sudo apt update
sudo apt install gh
gh --version
gh auth login</code></pre>
  <p><strong>Note:</strong> If you're using SSH or a headless environment, perform authentication on a different machine with a browser, then copy the following directories:</p>
  <pre><code>~/.config/gh
~/.config/github-copilot</code></pre>
  <p>Transfer them via <code>sftp</code> and fix permissions:</p>
  <pre><code>chown -R $USER ~$USER/.config</code></pre>

  <h2>3. Install Copilot CLI Extension</h2>
  <pre><code>gh extension install github/gh-copilot</code></pre>
  <p>Verify installation:</p>
  <pre><code>gh extensions list
gh copilot explain 'git rebase -i HEAD~3'
gh copilot suggest "convert all .mov files to .mp4 using ffmpeg"</code></pre>

  <h2>4. Setup Plugin Manager in Neovim</h2>
  <pre><code>git clone https://github.com/folke/lazy.nvim.git ~/.local/share/nvim/lazy/lazy.nvim</code></pre>

  <h2>5. Configure Neovim</h2>
  <pre><code>mkdir -p ~/.config/nvim/lua/plugins
nvim ~/.config/nvim/init.lua</code></pre>
  <p>Paste the following into <code>init.lua</code>:</p>
  <pre><code>-- vim.o.mouse = "" -- disable mouse (optional)
-- vim.cmd('source ~/.vimrc') -- load classic vim config (optional)

vim.opt.rtp:prepend("~/.local/share/nvim/lazy/lazy.nvim")
require("lazy").setup("plugins")</code></pre>

  <h2>6. Create Copilot Plugin Config</h2>
  <p>Edit <code>~/.config/nvim/lua/plugins/copilot.lua</code>:</p>
  <pre><code>return {
  "github/copilot.vim",
  lazy = false,
  config = function()
    vim.g.copilot_filetypes = {
      ["*"] = true,
    }
    vim.g.copilot_no_tab_map = true
    vim.api.nvim_set_keymap("i", "&lt;C-J&gt;", 'copilot#Accept("&lt;CR&gt;")', { silent = true, expr = true })
    vim.api.nvim_set_keymap("i", "&lt;C-H&gt;", 'copilot#Dismiss()', { silent = true, expr = true })
    vim.api.nvim_set_keymap("i", "&lt;C-L&gt;", 'copilot#Next()', { silent = true, expr = true })
    vim.api.nvim_set_keymap("i", "&lt;C-K&gt;", 'copilot#Previous()', { silent = true, expr = true })
    vim.api.nvim_set_keymap("i", "&lt;C-Space&gt;", 'copilot#Refresh()', { silent = true, expr = true })
  end,
}</code></pre>

  <h2>7. Run and Test Copilot</h2>
  <p>Launch Neovim:</p>
  <pre><code>nvim</code></pre>
  <p>If you see an error like <em>"Node is too old"</em>, update Node.js as needed.</p>

  <p>Run the Copilot status command:</p>
  <pre><code>:Copilot status</code></pre>
  <p>If you see <em>"You are not signed into GitHub"</em>, run:</p>
  <pre><code>gh auth login
gh auth status</code></pre>

  <p>Once <code>:Copilot status</code> shows <strong>Ready</strong>, test it:</p>
  <pre><code>nvim test.py</code></pre>
  <p>Start typing a function like:</p>
  <pre><code>def add(a, b):</code></pre>
  <p>Copilot should suggest something like:</p>
  <pre><code>    """Returns the sum of a and b."""
    return a + b</code></pre>

  <h2>8. Copilot Keybindings</h2>
  <ul>
    <li><kbd>Ctrl + J</kbd> – Accept suggestion</li>
    <li><kbd>Ctrl + H</kbd> – Dismiss suggestion</li>
    <li><kbd>Ctrl + L</kbd> – Next suggestion</li>
    <li><kbd>Ctrl + K</kbd> – Previous suggestion</li>
    <li><kbd>Ctrl + Space</kbd> – Refresh Copilot</li>
  </ul>
  <p>You can modify these in <code>~/.config/nvim/lua/plugins/copilot.lua</code>.</p>

  <h2>More Information</h2>
  <ul>
    <li><a href="https://github.com/github/copilot.vim" target="_blank">Copilot.vim official repository</a></li>
    <li>Inside Neovim: <code>:Copilot help</code> or <code>:help copilot</code></li>
  </ul>
</body>
</html>

